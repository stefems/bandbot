
function setupTwitterBot() {
    let twit = require('twit');
    let config = require('./.config.js');
    let Twitter = new twit(config);
}

function beginScrape() {
    var casper = require('casper').create();

    var links;

    function getLinks() {
    // Scrape the links from top-right nav of the website
        var links = document.querySelectorAll('ul.navigation li a');
        return Array.prototype.map.call(links, function (e) {
            return e.getAttribute('href')
        });
    }

    // Opens casperjs homepage
    casper.start('http://casperjs.org/');

    casper.then(function () {
        links = this.evaluate(getLinks);
    });

    casper.run(function () {
        for(var i in links) {
            console.log(links[i]);
        }
        casper.done();
    }); 
}
/*
// Define the scrape function
function scrape(url, data, cb) {
    // 1. Create the request
    req(url, (err, body) => {
        if (err) { return cb(err); }

        // 2. Parse the HTML
        let $ = cheerio.load(body)
          , pageData = {}
          ;
        
        
        // 3. Extract the data
        Object.keys(data).forEach(k => {
            pageData[k] = $(data[k]).text();
        });
		
        // Send the data in the callback
        cb(null, pageData);
    });
}
//let scrapeURL = "https://bandcamp.com/tag/salunga-landisville?page=9&sort_field=pop";
let genre = "electronic";
let scrapeURL = "https://bandcamp.com/tag/" + genre;
let randomPage = Math.floor(Math.random() * (10 - 1) + 1);
console.log(randomPage);
if (randomPage != 1) {
	scrapeURL += "?page=" + randomPage + "&sort_field=pop";
}

console.log(scrapeURL);

let scrapeData = { albums: ".item_list li"}
/*
// Extract some data from my website
scrape(scrapeURL, scrapeData, (err, data) => {
    if (!err) {
    	let randomAlbum = Math.floor(Math.random() * (40 - 1) + 1);
		console.log(randomAlbum);
    	let albumList = data.albums;
    	console.log(albumList);
    	console.log(albumList[randomAlbum]);
    	//console.log(albumList);
    	
    	
		
	}
});*/



setupTwitterBot();
beginScrape();
